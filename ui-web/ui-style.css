@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Syne:wght@400;700;800&display=swap');

:root {
  --bg: #0a0a0f; --s: #111118; --b: #1e1e2e;
  --a: #00d4ff;  --g: #00ff88; --y: #ffcc00; --r: #ff4466;
  --t: #e0e0f0;  --m: #555570;
}
[data-theme="light"] {
  --bg: #f4f5f9; --s: #ffffff; --b: #e0e0ea;
  --a: #0077cc;  --g: #00aa55; --y: #cc8800; --r: #cc2244;
  --t: #1a1a2e;  --m: #888899;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg); color: var(--t);
  font-family: 'JetBrains Mono', monospace;
  min-height: 100vh; padding: 14px;
}

/* ── Header ── */
.hdr {
  display: flex; justify-content: space-between; align-items: center;
  padding: 12px 18px; background: var(--s);
  border: 1px solid var(--b); border-radius: 12px; margin-bottom: 14px;
}
.hdr h1    { font-family: 'Syne', sans-serif; font-size: 1.2rem; font-weight: 800; color: var(--a); }
.hdr-right { display: flex; gap: 8px; align-items: center; }
#elapsed   { font-size: .7rem; color: var(--m); }
#ws-status { font-size: .65rem; padding: 3px 8px; border-radius: 8px; background: #00ff8815; color: var(--g); border: 1px solid var(--g); }
#ws-status.off { background: #ff446615; color: var(--r); border-color: var(--r); }
#theme-toggle {
  background: none; border: 1px solid var(--b);
  border-radius: 7px; padding: 5px 10px;
  color: var(--m); cursor: pointer; font-size: .8rem; transition: all .2s;
}
#theme-toggle:hover { color: var(--t); border-color: var(--a); }

/* ── Nav ── */
nav {
  display: flex; gap: 4px;
  background: var(--s); border: 1px solid var(--b);
  border-radius: 10px; padding: 4px; margin-bottom: 14px;
}
.nb {
  flex: 1; padding: 8px; border: none;
  background: transparent; color: var(--m);
  font-family: 'JetBrains Mono', monospace; font-size: .78rem;
  cursor: pointer; border-radius: 7px; transition: all .2s; font-weight: 700;
}
.nb.active             { background: var(--a); color: #000; }
.nb:not(.active):hover { color: var(--t); background: var(--b); }
.page       { display: none; }
.page.active{ display: block; }

/* ── Sub-tabs ── */
.subtabs {
  display: flex; gap: 4px; margin-bottom: 14px;
  border-bottom: 1px solid var(--b); padding-bottom: 4px;
}
.stab {
  padding: 6px 16px; border: 1px solid var(--b);
  background: transparent; color: var(--m);
  font-family: 'JetBrains Mono', monospace; font-size: .72rem;
  cursor: pointer; border-radius: 7px; transition: all .2s; font-weight: 700;
}
.stab.active             { background: var(--b); color: var(--t); border-color: var(--a); }
.stab:not(.active):hover { color: var(--t); }
.subtab-page       { display: none; }
.subtab-page.active{ display: block; }

/* ── Card ── */
.card { background: var(--s); border: 1px solid var(--b); border-radius: 12px; overflow: hidden; }
.card-head {
  padding: 10px 14px; border-bottom: 1px solid var(--b);
  font-size: .68rem; color: var(--m);
  text-transform: uppercase; letter-spacing: 1px;
  display: flex; justify-content: space-between; align-items: center;
}

/* ── Stats row ── */
.stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 14px; }
.stat {
  background: var(--s); border: 1px solid var(--b);
  border-radius: 10px; padding: 14px;
  position: relative; overflow: hidden;
}
.stat::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0;
  height: 2px; background: var(--a); opacity: .4;
}
.stat.g::before { background: var(--g); }
.stat.y::before { background: var(--y); }
.stat.r::before { background: var(--r); }
.stat-l { font-size: .62rem; color: var(--m); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
.stat-v { font-family: 'Syne', sans-serif; font-size: 1.5rem; font-weight: 800; }
.stat-v.ac { color: var(--a); }
.stat-v.gc { color: var(--g); }
.stat-v.yc { color: var(--y); }

/* ── Account cards ── */
.accounts-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 10px; margin-bottom: 14px; }
.acc-card { background: var(--s); border: 1px solid var(--b); border-radius: 10px; padding: 14px; transition: border-color .3s; }
.acc-card.buying  { border-color: var(--g); animation: glow .8s ease-in-out infinite alternate; }
.acc-card.stopped { border-color: var(--r); opacity: .7; }
@keyframes glow {
  from { box-shadow: 0 0 4px #00ff8840; }
  to   { box-shadow: 0 0 12px #00ff8880; }
}
.acc-card-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }
.acc-label    { font-size: .72rem; font-weight: 700; color: var(--t); }
.acc-site     { font-size: .62rem; color: var(--m); margin-top: 2px; }
.badge        { padding: 3px 9px; border-radius: 10px; font-size: .62rem; font-weight: 700; }
.badge-run    { background: #00ff8820; color: var(--g); border: 1px solid var(--g); }
.badge-stop   { background: #ff446620; color: var(--r); border: 1px solid var(--r); }
.badge-idle   { background: #ffcc0020; color: var(--y); border: 1px solid var(--y); }
.acc-stats    { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }
.acc-stat     { background: var(--bg); border-radius: 6px; padding: 7px 9px; }
.acc-stat-l   { font-size: .58rem; color: var(--m); margin-bottom: 2px; }
.acc-stat-v   { font-size: .85rem; font-weight: 700; color: var(--t); }
.delay-fast   { color: var(--r) !important; }
.delay-slow   { color: var(--g) !important; }

/* ── Bottom grid ── */
.bottom { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
#log-box, #bought-box {
  overflow-y: auto; padding: 10px;
  scrollbar-width: thin; scrollbar-color: var(--b) transparent;
}
#log-box    { height: 260px; font-size: .68rem; line-height: 1.8; }
#bought-box { height: 260px; padding: 8px; }
.ll      { color: var(--m); word-break: break-all; }
.ll.s    { color: var(--g); }
.ll.w    { color: var(--y); }
.ll.e    { color: var(--r); }
.ll.i    { color: var(--a); }
.ll.f    { color: #ff8800; }
.bi {
  display: flex; justify-content: space-between; align-items: center;
  padding: 7px 9px; border-radius: 7px; margin-bottom: 4px;
  background: #00ff8808; border: 1px solid #00ff8820;
  font-size: .68rem; animation: fadeIn .3s ease;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateX(-6px); }
  to   { opacity: 1; }
}
.bi-id    { color: var(--m); font-size: .6rem; margin-top: 2px; }
.bi-time  { color: var(--m); font-size: .6rem; }
.bi-price { color: var(--g); font-weight: 700; }

/* ── Buttons ── */
button {
  padding: 5px 12px; border-radius: 7px; border: 1px solid;
  font-family: 'JetBrains Mono', monospace; font-size: .7rem;
  font-weight: 700; cursor: pointer; transition: all .2s;
}
.btn-g           { background: #00ff8820; color: var(--g); border-color: var(--g); }
.btn-g:hover     { background: var(--g); color: #000; }
.btn-r           { background: #ff446620; color: var(--r); border-color: var(--r); }
.btn-r:hover     { background: var(--r); color: #000; }
.btn-ghost       { background: transparent; color: var(--m); border-color: var(--b); }
.btn-ghost:hover { color: var(--t); border-color: var(--m); }
.btn-p           { background: var(--a); color: #000; border-color: var(--a); }
.btn-p:hover     { opacity: .85; }
.btn-d           { background: #ff446620; color: var(--r); border-color: var(--r); }
.btn-d:hover     { background: var(--r); color: #000; }
.btn-xs          { padding: 2px 8px; font-size: .62rem; }
.btn-close       { background: none; border: none; color: var(--m); cursor: pointer; font-size: 1.2rem; }

/* ── Settings ── */
.settings-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
.sec { background: var(--s); border: 1px solid var(--b); border-radius: 12px; padding: 18px; }
.sec h3 {
  font-family: 'Syne', sans-serif; font-size: .82rem;
  font-weight: 700; color: var(--a);
  margin-bottom: 14px; padding-bottom: 8px; border-bottom: 1px solid var(--b);
}
.field { margin-bottom: 12px; }
.field label {
  display: block; font-size: .63rem; color: var(--m);
  text-transform: uppercase; letter-spacing: .8px; margin-bottom: 4px;
}
.field input[type=text],
.field input[type=number],
.field input[type=password] {
  width: 100%; background: var(--bg); border: 1px solid var(--b);
  border-radius: 7px; padding: 7px 10px;
  color: var(--t); font-family: 'JetBrains Mono', monospace; font-size: .75rem;
  transition: border-color .2s;
}
.field input:focus { outline: none; border-color: var(--a); }
.field input.err   { border-color: var(--r); }

/* ── Shared select style (replaces 5+ inline duplicates) ── */
.sel {
  width: 100%; background: var(--bg); border: 1px solid var(--b);
  border-radius: 7px; padding: 7px 10px;
  color: var(--t); font-family: 'JetBrains Mono', monospace; font-size: .75rem;
}

/* ── Toggle ── */
.toggle-row  { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.toggle      { position: relative; width: 38px; height: 20px; }
.toggle input { opacity: 0; width: 0; height: 0; }
.tslider {
  position: absolute; inset: 0;
  background: var(--b); border-radius: 10px;
  cursor: pointer; transition: .3s;
}
.tslider::before {
  content: ''; position: absolute;
  width: 14px; height: 14px; left: 3px; bottom: 3px;
  background: #fff; border-radius: 50%; transition: .3s;
}
.toggle input:checked + .tslider         { background: var(--a); }
.toggle input:checked + .tslider::before { transform: translateX(18px); }

/* ── History ── */
.history-toolbar { display: flex; gap: 8px; align-items: center; margin-bottom: 12px; flex-wrap: wrap; }
.history-toolbar select,
.history-toolbar input {
  background: var(--s); border: 1px solid var(--b);
  border-radius: 7px; padding: 6px 10px;
  color: var(--t); font-family: 'JetBrains Mono', monospace; font-size: .72rem;
}
#history-table-wrap { overflow-x: auto; }
table               { width: 100%; border-collapse: collapse; font-size: .7rem; }
th {
  padding: 9px 12px; text-align: left;
  font-size: .62rem; color: var(--m);
  text-transform: uppercase; letter-spacing: 1px;
  border-bottom: 1px solid var(--b); background: var(--s);
}
td          { padding: 9px 12px; border-bottom: 1px solid var(--b); color: var(--t); }
tr:hover td { background: #ffffff05; }
.td-price   { color: var(--g); font-weight: 700; }
.td-muted   { color: var(--m); font-size: .65rem; }
.no-data    { padding: 40px; text-align: center; color: var(--m); font-size: .78rem; }
.no-data-msg { padding: 30px; color: var(--m); font-size: .78rem; }
#load-more-wrap { text-align: center; padding: 10px; }

/* ── Misc form helpers ── */
.hint { font-size: .6rem; color: var(--m); margin-top: 3px; }
.sf {
  display: flex; gap: 8px; justify-content: flex-end;
  margin-top: 14px; padding-top: 14px; border-top: 1px solid var(--b);
}
.saved      { font-size: .7rem; color: var(--g); opacity: 0; transition: opacity .3s; align-self: center; }
.saved.show { opacity: 1; }
.site-sel-wrap { margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
#site-sel {
  background: var(--s); border: 1px solid var(--b);
  border-radius: 7px; padding: 5px 10px;
  color: var(--t); font-family: 'JetBrains Mono', monospace; font-size: .72rem;
}
.err-banner {
  background: #ff446618; border: 1px solid #ff446640;
  border-radius: 7px; padding: 8px 12px;
  font-size: .68rem; color: var(--r);
  margin-bottom: 10px; display: none;
}
.err-banner.show { display: block; }
.field-input-full {
  width: 100%; background: var(--bg); border: 1px solid var(--b);
  border-radius: 7px; padding: 7px 10px; color: var(--t);
  font-family: monospace; font-size: .75rem;
}

/* ── Account manager table ── */
.acc-table { width: 100%; border-collapse: collapse; font-size: .72rem; margin-bottom: 10px; }
.acc-table th {
  padding: 7px 10px; text-align: left; font-size: .6rem;
  color: var(--m); text-transform: uppercase; letter-spacing: .8px;
  border-bottom: 1px solid var(--b);
}
.acc-table td { padding: 7px 10px; border-bottom: 1px solid #1e1e2e44; vertical-align: middle; }
.acc-table tr:hover td { background: #ffffff04; }
.acc-table input[type=text],
.acc-table input[type=password] {
  background: var(--bg); border: 1px solid var(--b);
  border-radius: 5px; padding: 4px 8px;
  color: var(--t); font-family: 'JetBrains Mono', monospace; font-size: .7rem;
  width: 100%; transition: border-color .2s;
}
.acc-table input:focus { outline: none; border-color: var(--a); }
.acc-table input.err   { border-color: var(--r); }
.acc-add-row { display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap; }
.acc-add-row input {
  flex: 1; min-width: 80px;
  background: var(--bg); border: 1px solid var(--b);
  border-radius: 6px; padding: 5px 8px;
  color: var(--t); font-family: 'JetBrains Mono', monospace; font-size: .7rem;
}
.acc-add-row input:focus { outline: none; border-color: var(--g); }

/* ── Scheduler ── */
.countdown-box {
  text-align: center; padding: 20px;
  background: var(--s); border: 1px solid var(--b); border-radius: 12px; margin-bottom: 14px;
}
.countdown-time   { font-family: 'Syne', sans-serif; font-size: 3rem; font-weight: 800; color: var(--a); letter-spacing: 4px; display: block; margin: 8px 0; }
.countdown-label  { font-size: .65rem; color: var(--m); text-transform: uppercase; letter-spacing: 1px; }
.countdown-target { font-size: .72rem; color: var(--t); margin-top: 6px; }

/* ── Notifier ── */
.notif-group            { margin-bottom: 16px; padding-bottom: 14px; border-bottom: 1px solid var(--b); }
.notif-group:last-child { border-bottom: none; margin-bottom: 0; }
.notif-group-title      { font-size: .7rem; font-weight: 700; color: var(--a); margin-bottom: 10px; text-transform: uppercase; letter-spacing: .8px; }

/* ── Sites ── */
.site-list-item {
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px 14px; border-bottom: 1px solid var(--b);
}
.site-list-item:last-child { border-bottom: none; }
.site-name { font-size: .75rem; font-weight: 700; }
.site-host { font-size: .62rem; color: var(--m); margin-top: 2px; }
.json-editor {
  width: 100%; background: var(--bg); border: 1px solid var(--b);
  border-radius: 7px; padding: 10px; color: var(--t);
  font-family: 'JetBrains Mono', monospace; font-size: .7rem;
  resize: vertical; min-height: 280px; line-height: 1.6; transition: border-color .2s;
}
.json-editor:focus { outline: none; border-color: var(--a); }
.json-editor.err   { border-color: var(--r); }

/* ── Analytics ── */
.analytics-toolbar { display: flex; gap: 10px; align-items: center; margin-bottom: 14px; flex-wrap: wrap; }
.analytics-select  { background: var(--s); border: 1px solid var(--b); border-radius: 7px; padding: 5px 10px; color: var(--t); font-family: monospace; font-size: .72rem; }
.stat-card-center  { text-align: center; }
.stat-big   { font-size: 2rem; font-weight: 800; color: var(--a); }
.stat-good  { color: #4ade80; }
.stat-warn  { color: var(--r); }
.stat-label { font-size: .65rem; color: var(--m); text-transform: uppercase; letter-spacing: 1px; margin-top: 4px; }

/* ── Health ── */
.health-row {
  display: grid; grid-template-columns: 1fr auto auto auto; gap: 8px;
  align-items: center; padding: 8px 0; border-bottom: 1px solid var(--b);
}
.health-row:last-child { border-bottom: none; }
.health-key    { font-size: .72rem; font-weight: 700; }
.health-score  { font-family: 'Syne', sans-serif; font-size: 1.1rem; font-weight: 800; text-align: center; }
.health-trend  { font-size: .65rem; color: var(--m); }
.health-uptime { font-size: .62rem; color: var(--m); }
.health-bar-wrap { grid-column: 1 / -1; height: 4px; background: var(--b); border-radius: 2px; overflow: hidden; }
.health-bar      { height: 100%; border-radius: 2px; transition: width .4s ease; }

/* ── Multi-scheduler ── */
.ms-slot { background: var(--bg); border: 1px solid var(--b); border-radius: 8px; padding: 10px 12px; margin-bottom: 8px; }
.ms-slot-prewarm { border-color: var(--g); }
.ms-slot-top  { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
.ms-slot-label{ font-size: .75rem; font-weight: 700; }
.ms-slot-meta { font-size: .62rem; color: var(--m); margin-bottom: 6px; }

/* ── Record overlay ── */
.record-overlay {
  position: fixed; inset: 0; background: #000a; z-index: 999;
  display: flex; align-items: center; justify-content: center;
}
.record-dialog {
  background: var(--s); border: 1px solid var(--b); border-radius: 12px;
  padding: 24px; max-width: 600px; width: 90%; max-height: 80vh; overflow: auto;
}
.record-dialog-hdr { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; }
.record-meta { font-size: .7rem; color: var(--m); margin-bottom: 10px; }
.record-body {
  font-size: .7rem; font-family: monospace; white-space: pre-wrap; word-break: break-all;
  background: var(--bg); padding: 12px; border-radius: 8px; color: var(--t);
}

/* ── Utility ── */
.tc-muted    { color: var(--m); font-size: .85rem; }
.toggle-label{ font-size: .75rem; }
.fw-bold     { font-weight: 700; }
.tc-green    { color: #4ade80; }
.tc-red      { color: var(--r); }
.warn-box    { padding: 10px; background: #ffcc0010; border: 1px solid #ffcc0030; border-radius: 8px; font-size: .68rem; color: var(--y); }
.info-box    { padding: 8px; background: #00d4ff10; border: 1px solid #00d4ff30; border-radius: 6px; font-size: .68rem; color: var(--a); }
.guide-list  { font-size: .72rem; color: var(--m); line-height: 2.2; }
.code-accent { color: var(--a); }
.log-filter-select {
  background: var(--bg); border: 1px solid var(--b); border-radius: 5px;
  padding: 2px 6px; color: var(--m); font-size: .65rem; font-family: monospace;
}

/* ── Responsive ── */
@media (max-width: 680px) {
  .stats-row     { grid-template-columns: repeat(2, 1fr); }
  .bottom        { grid-template-columns: 1fr; }
  .settings-grid { grid-template-columns: 1fr; }
}
@media (max-width: 700px) {
  body { padding: 8px; }
  nav  { flex-wrap: wrap; gap: 3px; }
  .nb  { flex: none; width: calc(25% - 3px); font-size: .65rem; padding: 6px 4px; }
  .acc-table input[type=text],
  .acc-table input[type=password] { width: 80px; font-size: .65rem; }
  .hdr    { flex-wrap: wrap; gap: 6px; }
  .hdr h1 { font-size: 1rem; }
  .acc-table th, .acc-table td { padding: 5px 6px; font-size: .65rem; }
  .countdown-time { font-size: 2rem; }
  .json-editor    { min-height: 180px; }
}
